Память компьютера — это иерархическая система хранения данных, обеспечивающая быстрый доступ к информации для процессора. Она состоит из нескольких уровней, отличающихся скоростью, объемом и принципами работы. Давайте разберём её максимально подробно, начиная с физических основ и заканчивая логической организацией.  

---
## **1. Физические основы памяти: как хранятся биты?**  
В основе любой памяти лежат элементы, способные сохранять состояние (**0** или **1**). Существует несколько физических принципов хранения данных:  
### **1.1. Электростатическая память (DRAM, SRAM)**  
- **Конденсаторы (DRAM)** – в ячейке динамической памяти (DRAM) бит хранится как заряд на крошечном конденсаторе.  
  - **0** – конденсатор разряжен.  
  - **1** – конденсатор заряжен.  
  - **Проблема**: заряд утекает через несколько миллисекунд → требуется **регенерация (refresh)**.  

- **Триггеры (SRAM)** – в статической памяти (SRAM) бит хранится в схеме из 4-6 транзисторов (триггер).  
  - Не требует регенерации, но занимает больше места.  
  - Быстрее DRAM, но дороже → используется в кеше.  
### **1.2. Флэш-память (NAND, NOR)**  
- Основана на **плавающем затворе транзистора**.  
- Электроны туннелируют через изолятор и остаются на затворе, меняя пороговое напряжение.  
- **NAND Flash** – дешевле, медленнее (используется в SSD).  
- **NOR Flash** – быстрее, дороже (используется в микроконтроллерах).  
### **1.3. Магитная память (HDD, MRAM)**  
- **HDD** – биты хранятся как направление намагниченности доменов на диске.  
- **MRAM** – использует магнитные туннельные переходы (MTJ), энергонезависимая и быстрая.  
### **1.4. Перспективные технологии**  
- **ReRAM** – резистивная память, меняет сопротивление.  
- **PCM (Phase-Change Memory)** – переключается между аморфным и кристаллическим состоянием.  
- **3D XPoint (Optane)** – гибридная технология от Intel/Micron.  
---
## **2. Иерархия памяти: от регистров до HDD**  
Память организована в виде пирамиды: чем ближе к процессору, тем быстрее и меньше объём.  

| Уровень         | Тип памяти      | Задержка | Объём         | Пример               |
|-----------------|----------------|----------|--------------|----------------------|
| Регистры CPU    | SRAM           | 0.3–1 нс | ~1–4 КБ      | EAX, XMM0            |
| Кеш L1          | SRAM           | 1–3 нс   | 32–128 КБ    | Инструкции/данные    |
| Кеш L2          | SRAM           | 3–10 нс  | 256 КБ–8 МБ  | Unified cache        |
| Кеш L3 (LLC)    | SRAM           | 10–30 нс | 8–128 МБ     | Общий для ядер       |
| ОЗУ (DRAM)      | DDR4/DDR5      | 50–100 нс| 4–256 ГБ     | DIMM-модули          |
| SSD/NVMe        | NAND Flash     | 10–100 мкс | 256 ГБ–8 ТБ | Samsung 980 Pro      |
| HDD             | Магнитные диски| 1–10 мс  | 1–20 ТБ      | Seagate BarraCuda    |
### **2.1. Кеширование: как CPU избегает медленной памяти?**  
- **Принцип локальности**:  
  - **Временная** – если к данным обращались, скоро обратятся снова.  
  - **Пространственная** – если взят адрес X, скоро понадобится X+1.  
- **Алгоритмы замены кеша**:  
  - **LRU (Least Recently Used)** – вытесняет давно неиспользуемое.  
  - **Random** – случайный выбор (проще в реализации).  
### **2.2. Виртуальная память и страничная организация**  
- **Страницы** – блоки памяти (обычно 4 КБ), отображаемые в физическую RAM.  
- **TLB (Translation Lookaside Buffer)** – кеш трансляций виртуальных адресов.  
- Если страницы нет в RAM → **Page Fault** → загрузка с диска (swap).  
---
## **3. Организация DRAM: банки, строки, столбцы**  
DRAM – это не просто линейный массив, а сложная структура:  
- **Банки** – независимые субмассивы (параллельный доступ).  
- **Строка (Row)** – открывается командой **ACTIVATE**, попадает в **row buffer**.  
- **Столбец (Column)** – читается из row buffer командой **READ/WRITE**.  
- **Тайминги (CL-tRCD-tRP)** – задержки между операциями.  

Пример:  
```
Чтение из DRAM:  
1. Активировать строку (tRCD).  
2. Чтение столбца (CL).  
3. Закрыть строку (tRP).  
```
---
## **4. Память будущего: что нас ждёт?**  
- **CXL (Compute Express Link)** – унифицированный интерфейс для памяти и ускорителей.  
- **HBM (High Bandwidth Memory)** – 3D-стэкирование DRAM (до 1 ТБ/с).  
- **Optane (3D XPoint)** – попытка заменить DRAM и NAND (но пока дорого).  
---
## **Вывод**  
Память компьютера – это сложная многоуровневая система, где каждый слой оптимизирован под баланс скорости, стоимости и энергопотребления. От заряда в конденсаторе DRAM до алгоритмов кеширования в CPU – всё работает вместе, чтобы процессор не простаивал в ожидании данных.  

[[Архитектура компьютера]]